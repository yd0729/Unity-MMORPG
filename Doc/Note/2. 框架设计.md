## 2 框架设计

### 设计的流程

- 明确设计目标
- 充分考虑设计方案
- 可行性评估
- 选择最优方案

### 设计的内容

- 游戏玩法设计
- 整体架构设计及方案选择
- 客户端框架设计
- 服务器框架设计
- 工作流程设计

### 设计的阶段

- 整体框架的设计
- 系统方案的设计
- 模块详细设计
- 迭代优化

### 设计的关键

- 整体架构
- 网络通讯及协议
- 数据库及模型
- 服务器架构

### 网络架构图

![图 2](/.media/c79a7e28ce69272c2ca341e4d483f7a91893f273b2b925111c4ca8e68c8e9066.png)  

### 服务器架构图

![图 3](/.media/8e3b752d157d367964cdfd7e202430f2b21c7fbb75e79c548691b449912d50cb.png)  
![图 4](/.media/1c65dfd60149473341628507efe7316929f93b0650009e3a27ea1f54d94414da.png)  
![图 5](/.media/474ddd61dcf925e4a27798b42095267bce9ec146f4e5a461a05c9c3446100d56.png)  
![图 6](/.media/e74a94eabc71cd0e81484e09d91c99cbd9a64840d6df65953c90cb6ff438749e.png)  

### 服务器组架构图

![图 7](/.media/c6d549088f8a44115ffeaa86cec8e2645dddf539ab8c377b0e3ccf8276657e92.png)  

### 服务器架构层次结构图

![图 14](../../.media/0fce8e7915ee9ffda56da7dafaaed92de03ffcaca701d58b4b0e3124b41d0816.png)  

- 服务：处理来自客户端的请求。
- 实体：在客户端和服务器中同时存在。
- 模型：只在服务器中存在。
- 管理器：管理模型和实体。

### 服务器模块图

![图 8](/.media/aade75e099af21de6fe40b2928f421a0d212451b044cc15b1cb023cc12ac7b9b.png)  

核心模块涉及玩家之间的交互。

### 服务器 DB 实体关系

![图 9](/.media/0dc599d09de4288d225fd871a1f0470f3cdd742fb248ec608362f615c1596aeb.png)  

### 逻辑实体关系

![图 10](/.media/dd87ced5b3256eac558c03a257ca4c15a825db11ab4b1be710f6788c7b756095.png)  

### 角色状态

![图 11](/.media/23473ac06e883f5f94154384ba4a1a86e617167c9ef483b6eaa8f3a538e4e15c.png)  

### 角色属性

![图 12](/.media/3d0aaa33cd191dcf70b7741e23d17ec4c4bf022dcb65cbc1e523c185c5682422.png)  

### 消息类型

![图 1](/.media/4c91c6e0497904e025e95800acae04cc66197ec64679e3ea91649768b6d2514c.png)  

### 游戏系统框架图

![图 1](../../.media/fbd49cd3062d4e8afeeabc8a14e17dd9722e89a985973698a81fb978e8421deb.png)  

### 用户登录系统设计

- 客户端
    - UI 设计
        - 注册界面
        - 登录界面
    - 逻辑设计
        - 数据结构
        - 注册流程
        - 登录流程
- 服务器
    - 登录服务
        - 身份验证机制
    - 会话管理
- 协议
    - 协议结构
        - 注册协议
        - 登录协议
    - 协议生成